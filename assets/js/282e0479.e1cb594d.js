"use strict";(self.webpackChunksupport=self.webpackChunksupport||[]).push([[7750],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>g});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,m=d(e,["components","mdxType","originalType","parentName"]),u=s(n),c=r,g=u["".concat(l,".").concat(c)]||u[c]||p[c]||i;return n?a.createElement(g,o(o({ref:t},m),{},{components:n})):a.createElement(g,o({ref:t},m))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=c;var d={};for(var l in t)hasOwnProperty.call(t,l)&&(d[l]=t[l]);d.originalType=e,d[u]="string"==typeof e?e:r,o[1]=d;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},4001:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>d,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const i={title:"Scheduled Giving (Basic)",sidebar_position:6},o=void 0,d={unversionedId:"integration-guides/website-integration/scheduled-giving-basic/index",id:"integration-guides/website-integration/scheduled-giving-basic/index",title:"Scheduled Giving (Basic)",description:"Scheduled Giving is a donation method where a donor sets up automatic, recurring contributions to a charity or fundraising campaign on a fixed schedule, such as weekly, monthly, or annually.",source:"@site/docs/08-integration-guides/01-website-integration/06-scheduled-giving-basic/index.md",sourceDirName:"08-integration-guides/01-website-integration/06-scheduled-giving-basic",slug:"/integration-guides/website-integration/scheduled-giving-basic/",permalink:"/docs/integration-guides/website-integration/scheduled-giving-basic/",draft:!1,editUrl:"https://github.com/n3oltd/support/tree/main/docs/08-integration-guides/01-website-integration/06-scheduled-giving-basic/index.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"Scheduled Giving (Basic)",sidebar_position:6},sidebar:"docsSidebar",previous:{title:"Regular Giving (Sponsorships and Feedbacks)",permalink:"/docs/integration-guides/website-integration/regular-giving-sponsorships-feedbacks/"},next:{title:"Pledges (Basic)",permalink:"/docs/integration-guides/website-integration/pledge-basic/"}},l={},s=[{value:"Webhook Format Example",id:"webhook-format-example",level:2},{value:"Supported Payment Method",id:"supported-payment-method",level:2},{value:"Stripe",id:"stripe",level:3}],m={toc:s},u="wrapper";function p(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Scheduled Giving is a donation method where a donor sets up automatic, recurring contributions to a charity or fundraising campaign on a fixed schedule, such as weekly, monthly, or annually."),(0,r.kt)("p",null,"For any scheduled giving donations entered via the website, you will need to post data to the ",(0,r.kt)("strong",{parentName:"p"},"Engage webhook endpoint"),". This webhook is a standard one without any additional information including sponsorships and feedbacks and can be used for performing a basic donations integration."),(0,r.kt)("h2",{id:"webhook-format-example"},"Webhook Format Example"),(0,r.kt)("p",null,"The ",(0,r.kt)("em",{parentName:"p"},"json webhook")," example explained below shows how the data is expected along with a table explaining all webhook data parameters."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "id":"172765557689",\n\n    "type":"Scheduled",   [Type of donation]\n    \n    "timestamp":"2025-05-09T10:00:00.587Z",\n    \n    "ip":"82.29.232.77",\n    \n    "reference":"",\n    \n    "currency":"GBP",\n    \n    "amount":"100.00",  [Amount donated]\n    \n    "isorganization":false,\n    \n    "accounttype":"Individual",\n    \n    "individual": {\n        "title":"",\n        "first":"Arona",\n        "last":"Danielton"\n        },\n    \n    "organization": {   [Leave organization empty if the account type is individual]\n        "name":"",\n        "type":"",\n        "contact":{\n            "title":"",\n            "first":"",\n            "last":""\n        }\n    },\n    \n    "address": {\n        "line1":"18 Overton Circle",\n        "line2":"",\n        "line3":"",\n        "line4":"",\n        "towncity":"Cambridge ",\n        "countystate":"Cambridgeshire",\n        "postcode":"CB6 4BT",\n        "countrycode":"GB"\n    },\n    \n    "email":"AronaDanielton@armyspy.com",\n    \n    "phone":"07986421477",\n    \n    "giftaid":true,\n    \n    "contactpreferences": {\n        "email": {\n            "administration":false,\n            "fundraising":true\n        },\n        "sms": {\n            "administration":false,\n            "fundraising":false\n        },\n        "telephone": {\n            "administration":false,\n            "fundraising":true\n        },\n        "post": {\n            "administration":false,\n            "fundraising":false\n        }\n    },\n    \n    "scheduledgiving": {\n \n        "amount":"100.00",  [Total donated amount] \n        \n        "currency":"GBP", [Currency in which the amount is donated]\n        \n        "schedule":"10 Days of Dhul-Hijjah", [Name of the scheduled giving "campaign"]\n        \n        "presetname":"Equal", ["Split" process in which the donations would be collected (can be even, odd, or custom splits)]\n        \n        "startdate":"Lunar", [Start date on which the donations would start according to selected calendar]\n        \n        "timezone":"Europe/London" [Selected timezone for donations]\n    },\n\n    "customsplits": [{ [This custom split will be defined with "zero amount" if a "presetname" is already "sent" in the webhook]\n                       [If any day is missed during the scheduled giving, then the amount should be sent as "zero"]\n            "amount":0,\n            "daynumber":1\n        },\n        {\n            "amount":0,\n            "daynumber":2\n        },\n        {\n            "amount":0,\n            "daynumber":3\n        },\n        {\n            "amount":0,\n            "daynumber":4\n        },\n        {\n            "amount":0,\n            "daynumber":5\n        }\n    ],  \n    \n    "customSplits": [{ [This custom split will be defined with your allocated amount and day number if "presetname" \n                        is sent as "empty string" in the webhook and "total custom split amount" should be equal \n                        to "total scheduled giving amount"]\n            "amount": 8,\n            "dayNumber": 1\n        },\n        {\n            "amount": 10,\n            "dayNumber": 2\n        },\n        {\n            "amount": 15,\n            "dayNumber": 3\n        },\n        {\n            "amount": 5,\n            "dayNumber": 4\n        },\n        {\n            "amount": 5,\n            "dayNumber": 5\n        },\n        {\n            "amount": 8,\n            "dayNumber": 6\n        },\n        {\n            "amount": 10,\n            "dayNumber": 7\n        },\n        {\n            "amount": 15,\n            "dayNumber": 8\n        },\n        {\n            "amount": 2,\n            "dayNumber": 9\n        },\n        {\n            "amount": 2,\n            "dayNumber": 10\n        }\n    ],\n    \n    "credential": {\n        \n        "paymentmethodname":"stripe",\n        \n        "stripe": {\n            "setupintentid":"seti_1QSqEGGXSjuJfoEnWWClNNCX"\n        }\n    },\n    \n    "allocation": [\n        {\n            "type":"fund",\n            \n            "currency":"GBP",\n            \n            "amount":"100.00",\n            \n            "linkedtopledge":true,\n            \n            "funddimensions": {\n                "theme":"Emergency",\n                "location":"Where Most Needed",\n                "stipulation":"Sadaqah"\n            },\n            \n            "fund": \n            {\n                "item":"Emergency Fund"\n            }\n        }\n    ]\n}\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameters (Fields)"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"id")),(0,r.kt)("td",{parentName:"tr",align:null},"A unique string which identifies the transaction on the website.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"type")),(0,r.kt)("td",{parentName:"tr",align:null},"Depends on the donation, in this case, ",(0,r.kt)("strong",{parentName:"td"},"scheduled giving"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"reference")),(0,r.kt)("td",{parentName:"tr",align:null},"Any reference the donor was given in an email receipt from the website.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"isOrganization")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"True")," or ",(0,r.kt)("em",{parentName:"td"},"false")," depending on whether you allow donations from organizations. If omitted, will be assumed false.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"individual/organization")),(0,r.kt)("td",{parentName:"tr",align:null},"Complete either one of these sections, ",(0,r.kt)("strong",{parentName:"td"},"not both"),", depending on whether the donor is an individual or an organization. Usually this will be individual.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"organization.type")),(0,r.kt)("td",{parentName:"tr",align:null},"Should be one of the organization types you recognise in Engage.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"phone")),(0,r.kt)("td",{parentName:"tr",align:null},"Include the country code at the beginning. This should be calculated based on the address if it is not required by the donor to enter their country code.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"giftAid")),(0,r.kt)("td",{parentName:"tr",align:null},"Can be ",(0,r.kt)("em",{parentName:"td"},"true")," or ",(0,r.kt)("em",{parentName:"td"},"false")," if the donor explicitly states their gift aid status. Should be ",(0,r.kt)("em",{parentName:"td"},"null")," if the information is not collected or provided.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"contactPreferences")),(0,r.kt)("td",{parentName:"tr",align:null},"The categories ",(0,r.kt)("em",{parentName:"td"},"other")," and ",(0,r.kt)("em",{parentName:"td"},"fundraising")," are specific to each charity. In general, charities will have a category which covers ",(0,r.kt)("em",{parentName:"td"},"marketing")," (in this case fundraising) and ",(0,r.kt)("em",{parentName:"td"},"administration"),". You have to ensure that exact categories are agreed with the charity and added here. Also, ensure that explicit consent is being captured on the website before setting any category that covers marketing activity to ",(0,r.kt)("em",{parentName:"td"},"true"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"allocation")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("ul",null,(0,r.kt)("li",null," Allocations is a concept in Engage which represents the area where donation money is allocated to be spent and is a combination of ",(0,r.kt)("em",{parentName:"td"},"donation item")," plus ",(0,r.kt)("em",{parentName:"td"},"fund dimensions"),". Usually, the title of the web page or the item selected by the donor on the website will determine what is entered for an allocation. "),(0,r.kt)("li",null," 2. You can just send the ",(0,r.kt)("em",{parentName:"td"},"Item property"),", and Engage uses ",(0,r.kt)("em",{parentName:"td"},"Transform")," to transform the item sent here into the correct donation item and fund dimensions. "),(0,r.kt)("li",null," ",(0,r.kt)("strong",{parentName:"td"},"Note:")," This is an array, and it can contain multiple allocations, but generally there will only be one allocation here. ")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"allocation","[*]",".type")),(0,r.kt)("td",{parentName:"tr",align:null},"Can be fund or sponsorship, but in this case, ",(0,r.kt)("strong",{parentName:"td"},"fund"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"$.allocation","[*]",".fundDimensions")),(0,r.kt)("td",{parentName:"tr",align:null},"Only necessary if your website allows the donor to select or assign different locations or stipulations (e.g. zakah/sadaqah) in addition to the normal donation item. Your system administrator can confirm if this is necessary.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"credential.paymentmethodName")),(0,r.kt)("td",{parentName:"tr",align:null},"Should be the name of one of the payment methods the charity has set up in Engage which is configured for scheduled donations. For example, in this case, ",(0,r.kt)("strong",{parentName:"td"},"Stripe")," is the payment method and its relevant section should be completed accordingly.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"scheduledGiving")),(0,r.kt)("td",{parentName:"tr",align:null},"Specific for scheduled giving and consists of many elements to fill in.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"scheduledGiving.schedule")),(0,r.kt)("td",{parentName:"tr",align:null},"Name of the campaign selected for scheduled giving.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"scheduledGiving.presetName")),(0,r.kt)("td",{parentName:"tr",align:null},'"Split" process in which the donations would be collected (can be even, odd, or custom splits).')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"scheduledGiving.startDate")),(0,r.kt)("td",{parentName:"tr",align:null},"Start date of the donations according to the selected calendar.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"customSplits")),(0,r.kt)("td",{parentName:"tr",align:null},"Custom splits are added only when ",(0,r.kt)("strong",{parentName:"td"},"presetName")," is sent as an ",(0,r.kt)("strong",{parentName:"td"},"empty")," string in the webhook or if the charity wants to split the scheduled giving amount according to their preference. It includes two main elements: ",(0,r.kt)("em",{parentName:"td"},'"amount"')," and ",(0,r.kt)("em",{parentName:"td"},'"day number"'),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"customSplits.amount")),(0,r.kt)("td",{parentName:"tr",align:null},"Amount that will be divided. If the ",(0,r.kt)("strong",{parentName:"td"},"presetName")," has been sent, then it will be ",(0,r.kt)("strong",{parentName:"td"},"zero"),". ",(0,r.kt)("em",{parentName:"td"},"If any day is missed during a scheduled giving, then that day's amount should be sent as zero and the total scheduled giving amount must be divided among the rest of the days."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"customSplits.dayNumber")),(0,r.kt)("td",{parentName:"tr",align:null},"Day number and is divided according to the campaigns selected days.")))),(0,r.kt)("h2",{id:"supported-payment-method"},"Supported Payment Method"),(0,r.kt)("p",null,"Below is the supported payment method and its corresponding webhook structure."),(0,r.kt)("h3",{id:"stripe"},"Stripe"),(0,r.kt)("p",null,"For Stripe payment method, look at the example below of what should be sent in the webhook under ",(0,r.kt)("em",{parentName:"p"},"credentials"),"."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Wherever possible, use the ",(0,r.kt)("em",{parentName:"li"},"SetupIntentId")," that provides extra security and the donor will have a better experience as they would receive limited communications. "),(0,r.kt)("li",{parentName:"ul"},"If ",(0,r.kt)("em",{parentName:"li"},"SubscriptionID")," is supplied, it will be cancelled and converted to a payment method where Engage takes monthly payments. "))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"Stripe": {\n\n        "SetupIntentId": "si_3JZ0mQHnrctdHvuq1Kz5sPOo", \n                        \n                        OR\n\n        "SubscriptionID": "sub_1JXlDi2eZvKYlo2CI9M6sFCx"\n}\n')))}p.isMDXComponent=!0}}]);