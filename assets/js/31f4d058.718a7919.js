"use strict";(self.webpackChunksupport=self.webpackChunksupport||[]).push([[5893],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>h});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),d=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},m=function(e){var n=d(e.components);return a.createElement(s.Provider,{value:n},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=d(t),c=r,h=p["".concat(s,".").concat(c)]||p[c]||u[c]||o;return t?a.createElement(h,i(i({ref:n},m),{},{components:t})):a.createElement(h,i({ref:n},m))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=c;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var d=2;d<o;d++)i[d]=t[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},90036:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var a=t(87462),r=(t(67294),t(3905));const o={title:"Regular Giving - Standard",sidebar_position:3},i=void 0,l={unversionedId:"developers-designers/post-data-to-webhooks/regular-giving-standard/index",id:"developers-designers/post-data-to-webhooks/regular-giving-standard/index",title:"Regular Giving - Standard",description:"Regular giving donations, also known as recurring donations or monthly giving, are a type of charitable contribution in which a donor commits to giving a fixed amount of money to an organization on a regular and ongoing basis.",source:"@site/docs/06-developers-designers/02-post-data-to-webhooks/03-regular-giving-standard/index.md",sourceDirName:"06-developers-designers/02-post-data-to-webhooks/03-regular-giving-standard",slug:"/developers-designers/post-data-to-webhooks/regular-giving-standard/",permalink:"/docs/developers-designers/post-data-to-webhooks/regular-giving-standard/",draft:!1,editUrl:"https://github.com/n3oltd/support/tree/main/docs/06-developers-designers/02-post-data-to-webhooks/03-regular-giving-standard/index.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Regular Giving - Standard",sidebar_position:3},sidebar:"docsSidebar",previous:{title:"Single Donations - Sponsorships",permalink:"/docs/developers-designers/post-data-to-webhooks/single-donation-sponsorships/"},next:{title:"Testing Webhook Data",permalink:"/docs/developers-designers/testing-webhook-data/"}},s={},d=[{value:"Webhook Format Example",id:"webhook-format-example",level:2},{value:"Supported Payment Methods",id:"supported-payment-methods",level:2},{value:"Stripe",id:"stripe",level:3},{value:"GoCardless",id:"gocardless",level:3},{value:"SmartDebit",id:"smartdebit",level:3}],m={toc:d},p="wrapper";function u(e){let{components:n,...t}=e;return(0,r.kt)(p,(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Regular giving donations, also known as recurring donations or monthly giving, are a type of charitable contribution in which a donor commits to giving a fixed amount of money to an organization on a regular and ongoing basis. "),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Engage webhook endpoint will be setup and communicated to you by the system administrator. ")),(0,r.kt)("p",null,"For any regular giving donations entered via the website, you will need to post data to ",(0,r.kt)("strong",{parentName:"p"},"Engage webhook endpoint"),". "),(0,r.kt)("h2",{id:"webhook-format-example"},"Webhook Format Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "id": "2509",\n\n    "timestamp": "2011-10-05T14:48:00.000Z",\n\n    "ip": "82.29.232.77",\n\n    "reference": "2509",\n\n    "currency": "GBP",\n\n    "amount": "25",\n\n    "isOrganization": false,\n\n    "individual": {\n\n        "title": "Mr",\n\n        "first": "Jessie",\n\n        "last": "Iqbal"\n    },\n\n    "organization": {\n\n        "name": "N3O Ltd",\n\n        "type": "Business",\n\n        "contact": {\n\n            "title": "Mr",\n\n            "first": "Jessie",\n\n            "last": "Iqbal",\n        }\n    },\n}\n\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameters (Fields)"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"id")),(0,r.kt)("td",{parentName:"tr",align:null},"A unique string which identifies the transaction on the website.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"type")),(0,r.kt)("td",{parentName:"tr",align:null},"Either ",(0,r.kt)("em",{parentName:"td"},"single")," or ",(0,r.kt)("em",{parentName:"td"},"regular")," depending on whether the donation is recurring or one-off, in this case, regular.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"reference")),(0,r.kt)("td",{parentName:"tr",align:null},"Any reference the donor was given in an email receipt from the website.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"isOrganization")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"True")," or ",(0,r.kt)("em",{parentName:"td"},"false")," depending on whether you allow donations from organizations. If omitted, will be assumed false.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"individual/organization")),(0,r.kt)("td",{parentName:"tr",align:null},"Complete either one of these sections, ",(0,r.kt)("strong",{parentName:"td"},"not both"),", depending on whether the donor is an individual or an organization. Usually this will be individual.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"organization.type")),(0,r.kt)("td",{parentName:"tr",align:null},"Should be one of the organization types you recognise in Engage.")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "address": {\n\n        "line1": "101 Alexandra Road South, Whalley Range",\n\n        "line2": "Whalley Range",\n\n        "line3": "Optional",\n\n        "line4": "Optional",\n\n        "townCity": "Manchester",\n\n        "countyState": "Greater Manchester",\n\n        "postcode": "M16 8ST",\n\n        "countryCode": "GB"\n    },\n\n  "email": "donor@gmail.com",\n\n  "phone": "+447714243567",\n\n  "giftAid": true,\n\n  "contactPreferences": {\n\n        "email": {\n\n            "administration": true,\n\n            "fundraising": false\n        },\n\n        "sms": {\n\n            "administration": false,\n\n            "fundraising": false\n        },\n\n        "telephone": {\n\n            "administration": true,\n\n            "fundraising": false\n        },\n\n        "post": {\n\n            "administration": true,\n\n            "fundraising": false\n        }\n    },\n}\n\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameters (Fields)"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"phone")),(0,r.kt)("td",{parentName:"tr",align:null},"Include the country code at the beginning. This should be calculated based on the address if it is not required by the donor to enter their country code.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"giftAid")),(0,r.kt)("td",{parentName:"tr",align:null},"Can be ",(0,r.kt)("em",{parentName:"td"},"true")," or ",(0,r.kt)("em",{parentName:"td"},"false")," if the donor explicitly states their gift aid status. Should be ",(0,r.kt)("em",{parentName:"td"},"null")," if the information is not collected or provided.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"contactPreferences")),(0,r.kt)("td",{parentName:"tr",align:null},"The categories ",(0,r.kt)("em",{parentName:"td"},"other")," and ",(0,r.kt)("em",{parentName:"td"},"fundraising")," are specific to each charity. In general, charities will have a category which covers ",(0,r.kt)("em",{parentName:"td"},"marketing")," (in this case fundraising) and ",(0,r.kt)("em",{parentName:"td"},"administration"),". You have to ensure that exact categories are agreed with the charity and added here. Also, ensure that explicit consent is being captured on the website before setting any category that covers marketing activity to ",(0,r.kt)("em",{parentName:"td"},"true"),".")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "allocation": [\n    {    \n        "type": "fund",\n\n        "currency": "GBP",\n    \n        "amount": "5",\n            \n        "fund": {\n\n            "item": "Wash fund"\n        },      \n        "fundDimensions": {\n\n            "location": "Where needed",\n            "theme": "WASH",\n            "stipulation": "Sadaqah" \n        }\n    },\n\n    {\n\n        "type": "fund",\n\n        "amount": "20",   \n\n        "currency": "GBP",\n            \n        "fund": {\n\n            "item": "Food Parcel"\n        },      \n\n        "fundDimensions": {\n\n            "location": "Where needed",\n            "theme": "WASH",\n            "stipulation": "Sadaqah" \n        }\n    },\n    {\n\n        "type": "Sponsorship",\n\n        "amount": "70",\n\n        "currency": "GBP",\n\n        "fundDimensions": {\n\n            "location": "Yemen",\n            "theme": "health",\n            "stipulation": "sadaqah"\n        },\n        "sponsorship": {\n\n            "reference": "2509-1",\n            "scheme": "Orphan"\n        }\n    },\n    {\n\n        "type": "Sponsorship",           \n\n        "amount": "10",\n\n        "currency": "GBP",\n\n        "fundDimensions": {\n\n            "location": "Bangladesh",\n            "theme": "health",\n            "stipulation": "sadaqah"\n        },\n        "sponsorship": {\n\n            "reference": "2509-2",\n            "scheme": "Hifz"\n        }\n    },\n    {\n    \n        "type": "Feedback",           \n        \n        "currency": "GBP",\n                \n        "amount": "270.0",\n                    \n        "notes": "",\n                \n        "feedback": \n        {\n            "reference": "2509-3",\n                    \n            "scheme": "Tube Well",\n                    \n            "funddimensions": {\n\n                "location": "Where Most Needed",\n                "theme": "WASH",\n                "stipulation": "Sadaqah"\n            },\n            "currency": "GBP",\n                    \n            "price": "270.0",\n                    \n            "customfields":\n            { \n                "plaque": "Ahmad Ali " \n            }\n        },\n        \n        "funddimensions": {\n\n            "location": "Where Most Needed",\n            "theme": "WASH",\n            "stipulation": "Sadaqah"\n        }\n    }  \n    ],\n\n    "OrphanSponsorships": [\n    {\n        "reference": "2509-1",\n\n        "beganOn": "27/07/2023",\n\n        "beneficiaryReference": "f0rtnt7nbhr",\n            \n        "currency": "GBP",\n\n        "monthlyAmount": "70",\n\n        "fundDimensions": {\n\n                "location": "Yemen",\n                "theme": "health",\n                "stipulation": "sadaqah"\n        },\n\n        "scheme" : "Orphan"\n    }\n    ],\n\n    "HifzSponsorships": [\n    {\n        "reference": "2509-2",\n\n        "beganOn": "27/07/2023",\n\n        "beneficiaryReference": "f0rtnt7nbhr",\n\n        "currency": "GBP",\n\n        "monthlyAmount": "10",\n\n        "fundDimensions": {\n\n            "location": "Bangladesh",\n            "theme": "health",\n            "stipulation": "sadaqah"\n        },\n\n        "scheme" : "Hifz"\n    }\n    ],\n    "sponsorships": [\n    {\n        "reference": "2509-1",\n\n        "beganOn": "27/07/2023",\n\n        "beneficiaryReference": "f0rtnt7nbhr",\n\n        "currency": "GBP",\n\n        "monthlyAmount": "70",\n\n        "fundDimensions": {\n\n            "location": "Yemen",\n            "theme": "health",\n            "stipulation": "sadaqah"\n        },\n\n        "scheme" : "Orphan"\n    },\n    {\n        "reference": "2509-2",\n\n        "beganOn": "27/07/2023",\n\n        "beneficiaryReference": "f0rtnt7nbhr",\n\n        "currency": "GBP",\n\n        "monthlyAmount": "10",\n\n        "fundDimensions": {\n\n            "location": "Bangladesh",\n            "theme": "health",\n            "stipulation": "sadaqah"\n        },\n\n        "scheme" : "Hifz"\n    }\n    ],\n}\n\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameters (Fields)"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"allocation")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("ul",null,(0,r.kt)("li",null," Allocations is a concept in Engage which represents the area where donation money is allocated to be spent and is a combination of ",(0,r.kt)("em",{parentName:"td"},"donation item")," plus ",(0,r.kt)("em",{parentName:"td"},"fund dimensions"),". Usually, the title of the web page or the item selected by the donor on the website will determine what is entered for an allocation. "),(0,r.kt)("li",null," 2. You can just send the ",(0,r.kt)("em",{parentName:"td"},"Item property"),", and Engage uses ",(0,r.kt)("em",{parentName:"td"},"Transform")," to transform the item sent here into the correct donation item and fund dimensions. "),(0,r.kt)("li",null," ",(0,r.kt)("strong",{parentName:"td"},"Note:")," This is an array, and it can contain multiple allocations, but generally there will only be one allocation here. ")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"allocation","[*]",".type")),(0,r.kt)("td",{parentName:"tr",align:null},"This can be fund or sponsorship.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"$.allocation","[*]",".fundDimensions")),(0,r.kt)("td",{parentName:"tr",align:null},"This is only necessary if your website allows the donor to select or assign different locations or stipulations (e.g. zakah/sadaqah) in addition to the normal donation item. Your system administrator can confirm if this is necessary.")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "tubewellFeedbacks" : [\n    {\n        "reference": "2509-3",\n            \n        "scheme": "Tube Well",\n            \n        "funddimensions": {\n                \n            "location": "Where Most Needed",\n            "theme": "WASH",\n            "stipulation": "Sadaqah"\n        },\n        "currency": "USD",\n            \n        "price": 270.0,\n            \n        "customfields":\n        { \n            "plaque": "Ahmad Ali " \n        }\n    }\n    ],\n    "feedbacks": [\n    {\n        "reference": "2509-3",\n            \n        "scheme": "Tube Well",\n            \n        "funddimensions": {\n            "location": "Where Most Needed",\n            "theme": "WASH",\n            "stipulation": "Sadaqah"\n        },\n        "currency": "USD",\n            \n        "price": 270.0,\n            \n        "customfields":\n        { \n            "plaque": "Ahmad Ali" \n        }\n    }\n    ],\n    "regularGiving": \n    {\n        "frequency": "monthly",\n\n        "collectionDay": 1\n    },\n\n    "credential": {\n\n    "paymentMethodName": " ", [This value should be a string that matches the name of the payment method in your engage system, e.g. \u201cCard\u201d or \u201cPayPal\u201d. Depending on the payment method in use, this will be a property with payments specific fields, e.g:\n\n        "stripe": {    \n            "SetupIntentId": "si_3JZ0mQHnrctdHvuq1Kz5sPOo",\n        },\n    ]\n    },\n}\n\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameters (Fields)"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"credential.paymentmethodName")),(0,r.kt)("td",{parentName:"tr",align:null},"This should be the name of one of the payment methods the charity has set up in Engage which is configured for regular donations. For example, if the charity has 2 payment methods called ",(0,r.kt)("em",{parentName:"td"},"Card Payments")," and ",(0,r.kt)("em",{parentName:"td"},"PayPal Payments")," then the value should be the name of the payment method. Depending on the payment method selected, complete the relevant section depending on whether the payment method is Stripe, Opayo, Cash, Cheque, SmartDebit, PayPal, or LaunchGood.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"regularGiving")),(0,r.kt)("td",{parentName:"tr",align:null},"This is specific for regular giving plans and consists of two main elements.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"regularGiving.Frequency")),(0,r.kt)("td",{parentName:"tr",align:null},"This is either monthly, annually or quarterly with default as ",(0,r.kt)("em",{parentName:"td"},"monthly"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"regularGiving.Collection day")),(0,r.kt)("td",{parentName:"tr",align:null},"The day of the month of instruction e.g. 1, 9, 15 which should be one of the available collection dates which were configured in the payment method in Engage.")))),(0,r.kt)("h2",{id:"supported-payment-methods"},"Supported Payment Methods"),(0,r.kt)("p",null,"Below is a list of supported payment methods and their corresponding webhook structure."),(0,r.kt)("h3",{id:"stripe"},"Stripe"),(0,r.kt)("p",null,"For Stripe payment method, look at the example below of what should be sent in the webhook under ",(0,r.kt)("em",{parentName:"p"},"credentials"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"Stripe": {\n\n        "SetupIntentId": "si_3JZ0mQHnrctdHvuq1Kz5sPOo", \n                        \n                        OR\n\n        "SubscriptionID": "sub_1JXlDi2eZvKYlo2CI9M6sFCx"\n}\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Wherever possible, use the ",(0,r.kt)("em",{parentName:"li"},"SetupIntentId")," that provides extra security and the donor will have a better experience as they would receive limited communications. "),(0,r.kt)("li",{parentName:"ul"},"If ",(0,r.kt)("em",{parentName:"li"},"SubscriptionID")," is supplied, it will be cancelled and converted to a payment method where Engage takes monthly payments. "))),(0,r.kt)("h3",{id:"gocardless"},"GoCardless"),(0,r.kt)("p",null,"For GoCardless, provide the ",(0,r.kt)("em",{parentName:"p"},"MandateId")," and ",(0,r.kt)("em",{parentName:"p"},"CustomerId"),". "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"GoCardless": {\n\n    "MandateId": "N3O Ltd",\n\n    "CustomerId": "214214",\n}\n')),(0,r.kt)("h3",{id:"smartdebit"},"SmartDebit"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"You will need to create a ",(0,r.kt)("em",{parentName:"p"},"BACS reference number")," to be passed via the webhook. ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"SmartDebit": {\n\n    "AccountName": "N3O Ltd",\n\n    "SortCode": "111111",\n\n    "AccountNumber": "00000007",\n\n    "MandateReference": "BACS21791686441" [Unique within service user number]\n}\n')),(0,r.kt)("p",null,"SmartDebit guidance is specific for collecting donor information (e.g. account name, sort code) via your website and submitting the data to Engage via the webhook. Engage will then set up direct debit instructions directly with SmartDebit through their API."))}u.isMDXComponent=!0}}]);