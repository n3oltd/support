"use strict";(self.webpackChunksupport=self.webpackChunksupport||[]).push([[9839],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>u});var a=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=a.createContext({}),d=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=d(e.components);return a.createElement(l.Provider,{value:n},e.children)},m="mdxType",h={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=d(t),c=o,u=m["".concat(l,".").concat(c)]||m[c]||h[c]||r;return t?a.createElement(u,i(i({ref:n},p),{},{components:t})):a.createElement(u,i({ref:n},p))}));function u(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,i=new Array(r);i[0]=c;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[m]="string"==typeof e?e:o,i[1]=s;for(var d=2;d<r;d++)i[d]=t[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},67061:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var a=t(87462),o=(t(67294),t(3905));const r={title:"Single Donations - Sponsorships",sidebar_position:2},i=void 0,s={unversionedId:"developers-designers/post-data-to-webhooks/single-donation-sponsorships/index",id:"developers-designers/post-data-to-webhooks/single-donation-sponsorships/index",title:"Single Donations - Sponsorships",description:"For single donations entered via the website, you need to post data to Engage webhook endpoint. Below information shows how the data is expected for 'sponsorships'.",source:"@site/docs/06-developers-designers/02-post-data-to-webhooks/02-single-donation-sponsorships/index.md",sourceDirName:"06-developers-designers/02-post-data-to-webhooks/02-single-donation-sponsorships",slug:"/developers-designers/post-data-to-webhooks/single-donation-sponsorships/",permalink:"/docs/developers-designers/post-data-to-webhooks/single-donation-sponsorships/",draft:!1,editUrl:"https://github.com/n3oltd/support/tree/main/docs/06-developers-designers/02-post-data-to-webhooks/02-single-donation-sponsorships/index.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Single Donations - Sponsorships",sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Single Donations - Standard",permalink:"/docs/developers-designers/post-data-to-webhooks/single-donation-standard/"},next:{title:"Integration Guides",permalink:"/docs/category/integration-guides"}},l={},d=[{value:"Webhook Format Example",id:"webhook-format-example",level:2},{value:"Supported Payment Methods",id:"supported-payment-methods",level:2},{value:"Stripe",id:"stripe",level:3},{value:"PayPal",id:"paypal",level:3}],p={toc:d},m="wrapper";function h(e){let{components:n,...t}=e;return(0,o.kt)(m,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"For single donations entered via the website, you need to post data to ",(0,o.kt)("strong",{parentName:"p"},"Engage webhook endpoint"),". Below information shows how the data is expected for 'sponsorships'."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Engage webhook endpoint will be setup and communicated to you by the system administrator. ")),(0,o.kt)("p",null,"A sponsorship beneficary type is known as a scheme for e.g. orphans, widows, families etc. Each of these are considered separate schemes. In most cases, organisations may operate only one scheme e.g. orphan sponsorships, however, others will have multiple schemes and hence the webhook below needs to provide separate data for each scheme type.  "),(0,o.kt)("p",null,"Sponsorship information can be viewed across the allocations and sponsorships. Therefore, the role of the allocation array, is to create a link between the donation and sponsorships. The sponsorship per scheme array contains additional information including the following which is required to create the sponsorship in Engage. "),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Duration"),(0,o.kt)("li",{parentName:"ol"},"Begin on date"),(0,o.kt)("li",{parentName:"ol"},"Beneficiary reference ")),(0,o.kt)("h2",{id:"webhook-format-example"},"Webhook Format Example"),(0,o.kt)("p",null,"The webhook example explained in this section shows two types of sponsorship schemes in one webhook:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Orphan Sponsorships"),(0,o.kt)("li",{parentName:"ol"},"Family sponsorships")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"You need to review the notes and webhook data below before attempting to send over test webhooks.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "2509",\n\n  "timestamp": "2011-10-05T14:48:00.000Z",\n\n  "ip": "82.29.232.77",\n\n  "reference": "2509",\n\n  "currency": "GBP",\n\n  "amount": "25",\n\n  "isOrganization": false,\n\n  "individual": {\n\n        "title": "Mr",\n\n        "first": "Jessie",\n\n        "last": "Iqbal"\n\n  },\n\n  "organization": {\n\n        "name": "N3O Ltd",\n\n        "type": "Business",\n\n        "contact": {\n\n            "title": "Mr",\n\n            "first": "Jessie",\n\n            "last": "Iqbal",\n        }\n  },\n}\n\n')),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Parameters (Fields)"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"id")),(0,o.kt)("td",{parentName:"tr",align:null},"A unique string which identifies the transaction on the website.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"type")),(0,o.kt)("td",{parentName:"tr",align:null},"Either ",(0,o.kt)("em",{parentName:"td"},"single")," or ",(0,o.kt)("em",{parentName:"td"},"regular")," depending on whether the donation is recurring or one-off, in this case, single.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"reference")),(0,o.kt)("td",{parentName:"tr",align:null},"Any reference the donor was given in an email receipt from the website.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"isOrganization")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("em",{parentName:"td"},"True")," or ",(0,o.kt)("em",{parentName:"td"},"false")," depending on whether you allow donations from organisations. If omitted, will be assumed false.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"individual/organization")),(0,o.kt)("td",{parentName:"tr",align:null},"Complete either one of these sections, ",(0,o.kt)("strong",{parentName:"td"},"not both"),", depending on whether the donor is an individual or an organisation. Usually this will be individual.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"organization.type")),(0,o.kt)("td",{parentName:"tr",align:null},"Should be one of the organisation types you recognise in Engage.")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "address": {\n\n        "line1": "101 Alexandra Road South, Whalley Range",\n\n        "line2": "Whalley Range",\n\n        "line3": "Optional",\n\n        "line4": "Optional",\n\n        "townCity": "Manchester",\n\n        "countyState": "Greater Manchester",\n\n        "postcode": "M16 8ST",\n\n        "countryCode": "GB"\n  },\n\n  "email": "donor@gmail.com",\n\n  "phone": "+447714243567",\n\n  "giftAid": true,\n\n  "contactPreferences": {\n\n        "email": {\n\n            "administration": true,\n\n            "fundraising": false\n        },\n\n        "sms": {\n\n            "administration": false,\n\n            "fundraising": false\n        },\n\n        "telephone": {\n\n            "administration": true,\n\n            "fundraising": false\n        },\n\n        "post": {\n\n            "administration": true,\n\n            "fundraising": false\n        }\n    },\n}\n\n')),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Parameters (Fields)"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"phone")),(0,o.kt)("td",{parentName:"tr",align:null},"Include the country code at the beginning. This should be calculated based on the address if it is not required by the donor to enter their country code.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"giftAid")),(0,o.kt)("td",{parentName:"tr",align:null},"Can be true or false if the donor explicitly states their Gift Aid status. Should be null if the information is not collected or provided.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"contactPreferences")),(0,o.kt)("td",{parentName:"tr",align:null},"The categories ",(0,o.kt)("em",{parentName:"td"},"other")," and ",(0,o.kt)("em",{parentName:"td"},"fundraising")," are specific to each charity. In general, charities will have a category which covers ",(0,o.kt)("em",{parentName:"td"},"marketing")," (in this case fundraising) and ",(0,o.kt)("em",{parentName:"td"},"administration"),". You have to ensure that exact categories are agreed with the charity and added here. Also, ensure that explicit consent is being captured on the website before setting any category that covers marketing activity to ",(0,o.kt)("em",{parentName:"td"},"true"),".")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "allocation": [\n    {\n        "amount": "240",\n\n        "currency": "GBP",\n\n        "type": "sponsorship",\n\n        "fundDimensions":  {\n\n            "location": "Where needed",\n            "theme": "Child welfare",\n            "stipulation": "Sadaqah"     \n\n        },\n        "fund": {\n\n            "donationitem": "",\n\n            "summary": ""  \n        },\n\n        "sponsorship": {\n\n            "reference": "2509-1",\n\n            "scheme": "Orphan"\n\n        }\n    },\n\n    {\n\n        "amount": "360",    \n\n        "type": "sponsorship",\n\n        "currency": "GBP",\n\n        "fundDimensions":  {\n\n            "location": "Pakistan",\n            "theme": "Child welfare",\n            "stipulation": "Zakah"     \n        },\n        "fund": {\n\n            "donationitem": "",\n\n            "summary": ""  \n        },\n\n        "sponsorship": {\n\n            "reference": "2509-2",\n\n            "scheme": "Family"\n        }\n    }, \n\n    {\n        "currency": "GBP",\n        \n        "amount": "270.0",\n        \n        "notes": "",\n        \n        "type": "Feedback",\n        \n        "feedback": {\n            \n            "reference": "2509-3",\n            \n            "scheme": "Tube Well",\n            \n            "funddimensions": {\n            \n                "location": "Where Most Needed",\n                "theme": "WASH",\n                "stipulation": "Sadaqah"\n            },\n            \n            "currency": "GBP",\n            \n            "price": "270.0",\n            \n            "customfields":{ \n                "plaque": "Ahmad Ali " \n            }\n        },\n        \n        "funddimensions": {\n            \n            "location": "Where Most Needed",\n            "theme": "WASH",\n            "stipulation": "Sadaqah"\n        }\n    }\n    ],\n\n    "OrphanSponsorships": [\n    {\n        "reference": "2509-1",\n\n        "beganOn": "27/07/2023",\n\n        "beneficiaryReference": "f0rtnt7nbhr",\n\n        "scheme": "Orphan", [or whatever their scheme is called in Engage],\n            \n        "monthlyAmount": "20", [monthly value], [can be omitted and set as default on form if fixed price]\n\n        "currency": "GBP", \n\n        "fundDimensions": {\n\n            "location": "Where needed",\n            "theme": "Child Welfare",\n            "stipulation": "Sadaqah"   \n        },\n            \n        "duration": "_12" [can be omitted and set as default on form is website only offers 12 months option]\n    }\n    ],\n\n    "FamilySponsorships": [ \n    {\n        "reference": "2509-2",\n\n        "beganOn": "27/07/2023",\n\n        "beneficiaryReference": "f0rtnt7nbhr",\n\n        "scheme": "Family", [the name of scheme in Engage), \n\n        "currency": "GBP", \n\n        "fundDimensions": {\n\n            "location": "Pakistan",\n            "theme": "Education",\n            "stipulation": "Sadaqah"   \n        },\n\n        "monthlyAmount": "30", [monthly value and can be omitted or set as default on form if it is a fixed price]\n\n        "duration": "_12" [can be omitted and set as default on form if website only offers 12 months option]\n    }\n    ],\n\n    "Sponsorships" : [\n    {\n        "reference": "2509-1",\n\n        "beganOn": "27/07/2023",\n\n        "beneficiaryReference": "f0rtnt7nbhr",\n\n        "duration": "12",\n\n        "currency": "GBP",\n\n        "monthlyAmount": "70",\n\n        "fundDimensions": {\n\n                "location": "Where needed",\n                "theme": "Child Welfare",\n                "stipulation": "Sadaqah" \n            },\n        "scheme" : "Orphan"\n    },\n\n    {\n        "reference": "2509-2",\n\n        "beganOn": "27/07/2023",\n\n        "beneficiaryReference": "f0rtnt7nbhr",\n\n        "duration": "12",\n\n        "currency": "GBP",\n\n        "monthlyAmount": "10",\n\n        "fundDimensions": {\n\n            "location": "Pakistan",\n            "theme": "Education",\n            "stipulation": "Sadaqah"   \n\n        },\n\n        "scheme" : "Family"\n    }\n    ],\n}\n\n')),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Parameters (Fields)"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"allocation")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("ul",null,(0,o.kt)("li",null,"Allocations is a concept in Engage that represents the area where donation money is allocated to be spent and is a combination of ",(0,o.kt)("em",{parentName:"td"},"donation item")," plus ",(0,o.kt)("em",{parentName:"td"},"fund dimensions"),". Usually, the title of the web page or the item selected by the donor on the website will determine what is entered for an allocation. "),(0,o.kt)("li",null," You can just send the ",(0,o.kt)("em",{parentName:"td"},"Item property"),", and Engage uses ",(0,o.kt)("em",{parentName:"td"},"Transform")," to transform the item sent here into the correct donation item and fund dimensions. "),(0,o.kt)("li",null,(0,o.kt)("strong",{parentName:"td"},"Note:")," This is an array, and it can contain multiple allocations, but generally there will only be 1 allocation here. ")))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"allocation","[*]",".type")),(0,o.kt)("td",{parentName:"tr",align:null},"This can be fund or sponsorship.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"$.allocation","[*]",".fundDimensions")),(0,o.kt)("td",{parentName:"tr",align:null},"This is only necessary if your website allows the donor to select or assign different locations or stipulations (e.g. zakah/sadaqah) in addition to the normal donation item. Your system administrator can confirm if this is necessary.")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "tubewellFeedbacks" : [\n        {\n            "reference": "2509-3",\n            \n            "scheme": "Tube Well",\n            \n            "funddimensions": {\n                "location": "Where Most Needed",\n                "theme": "WASH",\n                "stipulation": "Sadaqah"\n               },\n            \n            "currency": "USD",\n            \n            "price": "270.0",\n            \n            "customfields":\n                { \n                    "plaque": "Ahmad Ali " \n                }\n        }\n    ],\n\n    "feedbacks": [\n        {\n            "reference": "2509-3",\n            \n            "scheme": "Tube Well",\n            \n            "funddimensions": {\n            \n                "location": "Where Most Needed",\n                "theme": "WASH",\n                "stipulation": "Sadaqah"\n            },\n        \n            "currency": "USD",\n            \n            "price": "270.0",\n            \n            "customfields":\n            { \n                "plaque": "Ahmad Ali"\n            }\n        }\n    ],\n\n    "payment": {\n\n        "paymentMethodName": "Stripe", [This value should be a string that matches the name of the payment method in your engage system, e.g. \u201cStripe\u201d or \u201cPayPal\u201d]\n\n        "amount": "600",\n\n        "stripe": {\n            \n            "stripeChargeId" : "ch_343454565676879"\n        } \n        \n        [ Depending on the payment method in use, this will be a property with payments specific fields e.g:\n            "stripe": {\n                "paymentIntentId": "pi_3JZ0mQHnrctdHvuq1Kz5sPOo",\n            },\n        ]\n    },\n\n    "interactions": [\n        {\n            "touchpoint": "donated-website",         \n            "timestamp": "2023-08-18T03:43:34.36Z"\n        }\n    ]\n}\n')),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Parameters (Fields)"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"payment")),(0,o.kt)("td",{parentName:"tr",align:null},"Populated only on single donations.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"payment.paymentMethodName")),(0,o.kt)("td",{parentName:"tr",align:null},"This field should be the name of one of the payment methods the charity has set up in Engage which is configured for single donations. For example, if the charity has 2 payment methods called ",(0,o.kt)("em",{parentName:"td"},"Card Payments")," and ",(0,o.kt)("em",{parentName:"td"},"PayPal Payments")," then the value should be the name of the payment method. Depending on the payment method selected, you should complete the relevant section depending on whether the payment type is ",(0,o.kt)("em",{parentName:"td"},"Stripe, Opayo, Cash, Cheque, SmartDebit, PayPal or LaunchGood"),".")))),(0,o.kt)("h2",{id:"supported-payment-methods"},"Supported Payment Methods"),(0,o.kt)("p",null,"Below is a list of supported payment methods and their corresponding webhook structure."),(0,o.kt)("h3",{id:"stripe"},"Stripe"),(0,o.kt)("p",null,"For a Stripe payment method you can use either ",(0,o.kt)("strong",{parentName:"p"},"PaymentIntentId")," or ",(0,o.kt)("strong",{parentName:"p"},"ChargeId"),", but you must supply one of these in the webhook. ",(0,o.kt)("em",{parentName:"p"},"CustomerID")," is not required, but you can send it if you have it."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"Stripe": {\n\n    "CustomerId": "cs_1JXlDi2eZvKYlo2CI9M6sFCx",\n\n    "ChargeId": "ch_3MbsKOIhCuwGfAB01hwiYwYZ",\n\n    "PaymentIntentId": "pi_3JZ0mQHnrctdHvuq1Kz5sPOo",\n},\n')),(0,o.kt)("h3",{id:"paypal"},"PayPal"),(0,o.kt)("p",null,"For a PayPal payment method, Engage requires the ",(0,o.kt)("strong",{parentName:"p"},"Transaction reference")," only. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"PayPal": {\n\n    "TransactionReference:": "abc123"\n}\n')))}h.isMDXComponent=!0}}]);